import streamlit as st
import os
import json
import pandas as pd
import matplotlib.pyplot as plt
import spotipy
from spotipy.oauth2 import SpotifyOAuth
from sklearn.feature_extraction.text import TfidVectorizer
from sklearn.metrics.pairwise import cosine_similarity

# GrundsÃ¤tzliche Konfiguration/Vorbereitung fÃ¼r Streamlit 
st.set_page_config(page_title="Spotify Podcast Filter", layout="centered")

#Initialize session state
if "page_number" not in st.session_state:
  st.session_state.page_number = 0 
if "user_profile" not in st.session_state:
  st.session_state.user_profile = {
    "interests": [],
    "languages": [],
    "duration": (20, 60),
    "mood": [], 
    "location": ""
  }

profile_file = "user_profile.json"

#Spotify Authentication 
sp = spotipy.Spotify(auth_manager=SpotifyOAuth(
    client_id="554c66803ecd4fe5ae23039953589266", # Replace with real 
    client_secret="42c3865847ef4b1885776511a21290f4" # Replace with real
    redirect_uri="http://127.0.0.1:8501/callback",
    scope="user-library-read"
))

#Step definitions
steps = ["Welcome", "Interests", "Languages", "Duration", "Mood", "Location"]

def next_page():
    st.session_state.page_number += 1

def prev_page():
    if st.session_state.page_number > 0:
        st.session_state.page_number -= 1

# Progress
progress = min((st.session_state.page_number + 1) / len(steps), 1.0)
st.progress(progress)

# Step 0: Welcome 
if st.session_state.page_number == 0:
    st.title("ðŸŽ‰Welcome to Your Personalized Podcast Experience!")
